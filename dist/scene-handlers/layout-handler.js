"use strict";
/**
 * Layout UI 创建处理器
 * 在场景脚本上下文中执行，可以直接访问 cc 对象
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.createLayoutWithTemplate = createLayoutWithTemplate;
/**
 * 创建 Layout 组件
 * @param name Layout 节点名称
 * @param parentUuid 父节点 UUID
 * @param width Layout 宽度
 * @param height Layout 高度
 * @param spriteFrameUuid 背景 Sprite Frame UUID
 * @param getCC 获取 Cocos 引擎实例的函数
 * @param markSceneDirty 标记场景为脏的函数
 */
function createLayoutWithTemplate(name, parentUuid, width, height, spriteFrameUuid, getCC, markSceneDirty) {
    try {
        const { director, Node } = getCC();
        const scene = director.getScene();
        if (!scene) {
            return { success: false, error: 'No active scene' };
        }
        // 1. 创建主节点
        const layoutNode = new Node(name);
        const parent = parentUuid ? scene.getChildByUuid(parentUuid) : scene;
        if (parent) {
            parent.addChild(layoutNode);
        }
        else {
            scene.addChild(layoutNode);
        }
        // 设置主节点大小和锚点
        layoutNode.setContentSize(width, height);
        layoutNode.setAnchorPoint(0.5, 0.5);
        // 2. 添加 Sprite 组件 (背景)
        const spriteComp = layoutNode.addComponent(cc.Sprite);
        spriteComp.type = cc.Sprite.Type.SLICED; // 1 - SLICED 模式
        spriteComp.sizeMode = cc.Sprite.SizeMode.CUSTOM; // 0 - CUSTOM 模式
        // 设置 SpriteFrame 的 UUID
        const spriteFrame = new cc.SpriteFrame();
        spriteFrame._uuid = spriteFrameUuid;
        spriteComp.spriteFrame = spriteFrame;
        // 3. 添加 Layout 组件
        const layoutComp = layoutNode.addComponent(cc.Layout);
        // 默认 Layout 配置 (Type: NONE, ResizeMode: NONE)
        // 如果需要特定配置，可以在这里添加
        // 标记场景为已修改并保存
        markSceneDirty();
        // 通知编辑器刷新场景视图
        try {
            if (typeof Editor !== 'undefined' && Editor.Ipc && Editor.Ipc.sendToPanel) {
                Editor.Ipc.sendToPanel('scene', 'scene:soft-reload');
            }
        }
        catch (error) {
            console.warn('[scene-script] Failed to refresh scene view:', error);
        }
        return {
            success: true,
            message: `Layout '${name}' created successfully`,
            data: {
                uuid: layoutNode.uuid || layoutNode._id,
                name: layoutNode.name || layoutNode._name,
                width: width,
                height: height
            }
        };
    }
    catch (error) {
        return {
            success: false,
            error: error.message || error
        };
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGF5b3V0LWhhbmRsZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvc2NlbmUtaGFuZGxlcnMvbGF5b3V0LWhhbmRsZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBOzs7R0FHRzs7QUFZSCw0REF3RUM7QUFsRkQ7Ozs7Ozs7OztHQVNHO0FBQ0gsU0FBZ0Isd0JBQXdCLENBQ3BDLElBQVksRUFDWixVQUF5QixFQUN6QixLQUFhLEVBQ2IsTUFBYyxFQUNkLGVBQXVCLEVBQ3ZCLEtBQWdCLEVBQ2hCLGNBQTBCO0lBRTFCLElBQUksQ0FBQztRQUNELE1BQU0sRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLEdBQUcsS0FBSyxFQUFFLENBQUM7UUFDbkMsTUFBTSxLQUFLLEdBQUcsUUFBUSxDQUFDLFFBQVEsRUFBRSxDQUFDO1FBQ2xDLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQztZQUNULE9BQU8sRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxpQkFBaUIsRUFBRSxDQUFDO1FBQ3hELENBQUM7UUFFRCxXQUFXO1FBQ1gsTUFBTSxVQUFVLEdBQUcsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDbEMsTUFBTSxNQUFNLEdBQUcsVUFBVSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsY0FBYyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUM7UUFDckUsSUFBSSxNQUFNLEVBQUUsQ0FBQztZQUNULE1BQU0sQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDaEMsQ0FBQzthQUFNLENBQUM7WUFDSixLQUFLLENBQUMsUUFBUSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQy9CLENBQUM7UUFFRCxhQUFhO1FBQ2IsVUFBVSxDQUFDLGNBQWMsQ0FBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLENBQUM7UUFDekMsVUFBVSxDQUFDLGNBQWMsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFFcEMsdUJBQXVCO1FBQ3ZCLE1BQU0sVUFBVSxHQUFHLFVBQVUsQ0FBQyxZQUFZLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ3RELFVBQVUsQ0FBQyxJQUFJLEdBQUcsRUFBRSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsZ0JBQWdCO1FBQ3pELFVBQVUsQ0FBQyxRQUFRLEdBQUcsRUFBRSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUMsZ0JBQWdCO1FBRWpFLHdCQUF3QjtRQUN4QixNQUFNLFdBQVcsR0FBRyxJQUFJLEVBQUUsQ0FBQyxXQUFXLEVBQUUsQ0FBQztRQUN4QyxXQUFtQixDQUFDLEtBQUssR0FBRyxlQUFlLENBQUM7UUFDN0MsVUFBVSxDQUFDLFdBQVcsR0FBRyxXQUFXLENBQUM7UUFFckMsa0JBQWtCO1FBQ2xCLE1BQU0sVUFBVSxHQUFHLFVBQVUsQ0FBQyxZQUFZLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ3RELDhDQUE4QztRQUM5QyxtQkFBbUI7UUFFbkIsY0FBYztRQUNkLGNBQWMsRUFBRSxDQUFDO1FBRWpCLGNBQWM7UUFDZCxJQUFJLENBQUM7WUFDRCxJQUFJLE9BQU8sTUFBTSxLQUFLLFdBQVcsSUFBSSxNQUFNLENBQUMsR0FBRyxJQUFJLE1BQU0sQ0FBQyxHQUFHLENBQUMsV0FBVyxFQUFFLENBQUM7Z0JBQ3hFLE1BQU0sQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLE9BQU8sRUFBRSxtQkFBbUIsQ0FBQyxDQUFDO1lBQ3pELENBQUM7UUFDTCxDQUFDO1FBQUMsT0FBTyxLQUFLLEVBQUUsQ0FBQztZQUNiLE9BQU8sQ0FBQyxJQUFJLENBQUMsOENBQThDLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFDeEUsQ0FBQztRQUVELE9BQU87WUFDSCxPQUFPLEVBQUUsSUFBSTtZQUNiLE9BQU8sRUFBRSxXQUFXLElBQUksd0JBQXdCO1lBQ2hELElBQUksRUFBRTtnQkFDRixJQUFJLEVBQUUsVUFBVSxDQUFDLElBQUksSUFBSSxVQUFVLENBQUMsR0FBRztnQkFDdkMsSUFBSSxFQUFFLFVBQVUsQ0FBQyxJQUFJLElBQUksVUFBVSxDQUFDLEtBQUs7Z0JBQ3pDLEtBQUssRUFBRSxLQUFLO2dCQUNaLE1BQU0sRUFBRSxNQUFNO2FBQ2pCO1NBQ0osQ0FBQztJQUNOLENBQUM7SUFBQyxPQUFPLEtBQVUsRUFBRSxDQUFDO1FBQ2xCLE9BQU87WUFDSCxPQUFPLEVBQUUsS0FBSztZQUNkLEtBQUssRUFBRSxLQUFLLENBQUMsT0FBTyxJQUFJLEtBQUs7U0FDaEMsQ0FBQztJQUNOLENBQUM7QUFDTCxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBMYXlvdXQgVUkg5Yib5bu65aSE55CG5ZmoXG4gKiDlnKjlnLrmma/ohJrmnKzkuIrkuIvmlofkuK3miafooYzvvIzlj6/ku6Xnm7TmjqXorr/pl64gY2Mg5a+56LGhXG4gKi9cblxuLyoqXG4gKiDliJvlu7ogTGF5b3V0IOe7hOS7tlxuICogQHBhcmFtIG5hbWUgTGF5b3V0IOiKgueCueWQjeensFxuICogQHBhcmFtIHBhcmVudFV1aWQg54i26IqC54K5IFVVSURcbiAqIEBwYXJhbSB3aWR0aCBMYXlvdXQg5a695bqmXG4gKiBAcGFyYW0gaGVpZ2h0IExheW91dCDpq5jluqZcbiAqIEBwYXJhbSBzcHJpdGVGcmFtZVV1aWQg6IOM5pmvIFNwcml0ZSBGcmFtZSBVVUlEXG4gKiBAcGFyYW0gZ2V0Q0Mg6I635Y+WIENvY29zIOW8leaTjuWunuS+i+eahOWHveaVsFxuICogQHBhcmFtIG1hcmtTY2VuZURpcnR5IOagh+iusOWcuuaZr+S4uuiEj+eahOWHveaVsFxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlTGF5b3V0V2l0aFRlbXBsYXRlKFxuICAgIG5hbWU6IHN0cmluZyxcbiAgICBwYXJlbnRVdWlkOiBzdHJpbmcgfCBudWxsLFxuICAgIHdpZHRoOiBudW1iZXIsXG4gICAgaGVpZ2h0OiBudW1iZXIsXG4gICAgc3ByaXRlRnJhbWVVdWlkOiBzdHJpbmcsXG4gICAgZ2V0Q0M6ICgpID0+IGFueSxcbiAgICBtYXJrU2NlbmVEaXJ0eTogKCkgPT4gdm9pZFxuKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgeyBkaXJlY3RvciwgTm9kZSB9ID0gZ2V0Q0MoKTtcbiAgICAgICAgY29uc3Qgc2NlbmUgPSBkaXJlY3Rvci5nZXRTY2VuZSgpO1xuICAgICAgICBpZiAoIXNjZW5lKSB7XG4gICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdObyBhY3RpdmUgc2NlbmUnIH07XG4gICAgICAgIH1cblxuICAgICAgICAvLyAxLiDliJvlu7rkuLvoioLngrlcbiAgICAgICAgY29uc3QgbGF5b3V0Tm9kZSA9IG5ldyBOb2RlKG5hbWUpO1xuICAgICAgICBjb25zdCBwYXJlbnQgPSBwYXJlbnRVdWlkID8gc2NlbmUuZ2V0Q2hpbGRCeVV1aWQocGFyZW50VXVpZCkgOiBzY2VuZTtcbiAgICAgICAgaWYgKHBhcmVudCkge1xuICAgICAgICAgICAgcGFyZW50LmFkZENoaWxkKGxheW91dE5vZGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2NlbmUuYWRkQ2hpbGQobGF5b3V0Tm9kZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyDorr7nva7kuLvoioLngrnlpKflsI/lkozplJrngrlcbiAgICAgICAgbGF5b3V0Tm9kZS5zZXRDb250ZW50U2l6ZSh3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgbGF5b3V0Tm9kZS5zZXRBbmNob3JQb2ludCgwLjUsIDAuNSk7XG5cbiAgICAgICAgLy8gMi4g5re75YqgIFNwcml0ZSDnu4Tku7YgKOiDjOaZrylcbiAgICAgICAgY29uc3Qgc3ByaXRlQ29tcCA9IGxheW91dE5vZGUuYWRkQ29tcG9uZW50KGNjLlNwcml0ZSk7XG4gICAgICAgIHNwcml0ZUNvbXAudHlwZSA9IGNjLlNwcml0ZS5UeXBlLlNMSUNFRDsgLy8gMSAtIFNMSUNFRCDmqKHlvI9cbiAgICAgICAgc3ByaXRlQ29tcC5zaXplTW9kZSA9IGNjLlNwcml0ZS5TaXplTW9kZS5DVVNUT007IC8vIDAgLSBDVVNUT00g5qih5byPXG4gICAgICAgIFxuICAgICAgICAvLyDorr7nva4gU3ByaXRlRnJhbWUg55qEIFVVSURcbiAgICAgICAgY29uc3Qgc3ByaXRlRnJhbWUgPSBuZXcgY2MuU3ByaXRlRnJhbWUoKTtcbiAgICAgICAgKHNwcml0ZUZyYW1lIGFzIGFueSkuX3V1aWQgPSBzcHJpdGVGcmFtZVV1aWQ7XG4gICAgICAgIHNwcml0ZUNvbXAuc3ByaXRlRnJhbWUgPSBzcHJpdGVGcmFtZTtcblxuICAgICAgICAvLyAzLiDmt7vliqAgTGF5b3V0IOe7hOS7tlxuICAgICAgICBjb25zdCBsYXlvdXRDb21wID0gbGF5b3V0Tm9kZS5hZGRDb21wb25lbnQoY2MuTGF5b3V0KTtcbiAgICAgICAgLy8g6buY6K6kIExheW91dCDphY3nva4gKFR5cGU6IE5PTkUsIFJlc2l6ZU1vZGU6IE5PTkUpXG4gICAgICAgIC8vIOWmguaenOmcgOimgeeJueWumumFjee9ru+8jOWPr+S7peWcqOi/memHjOa3u+WKoFxuXG4gICAgICAgIC8vIOagh+iusOWcuuaZr+S4uuW3suS/ruaUueW5tuS/neWtmFxuICAgICAgICBtYXJrU2NlbmVEaXJ0eSgpO1xuICAgICAgICBcbiAgICAgICAgLy8g6YCa55+l57yW6L6R5Zmo5Yi35paw5Zy65pmv6KeG5Zu+XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIEVkaXRvciAhPT0gJ3VuZGVmaW5lZCcgJiYgRWRpdG9yLklwYyAmJiBFZGl0b3IuSXBjLnNlbmRUb1BhbmVsKSB7XG4gICAgICAgICAgICAgICAgRWRpdG9yLklwYy5zZW5kVG9QYW5lbCgnc2NlbmUnLCAnc2NlbmU6c29mdC1yZWxvYWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignW3NjZW5lLXNjcmlwdF0gRmFpbGVkIHRvIHJlZnJlc2ggc2NlbmUgdmlldzonLCBlcnJvcik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGBMYXlvdXQgJyR7bmFtZX0nIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5YCxcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICB1dWlkOiBsYXlvdXROb2RlLnV1aWQgfHwgbGF5b3V0Tm9kZS5faWQsXG4gICAgICAgICAgICAgICAgbmFtZTogbGF5b3V0Tm9kZS5uYW1lIHx8IGxheW91dE5vZGUuX25hbWUsXG4gICAgICAgICAgICAgICAgd2lkdGg6IHdpZHRoLFxuICAgICAgICAgICAgICAgIGhlaWdodDogaGVpZ2h0XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSB8fCBlcnJvclxuICAgICAgICB9O1xuICAgIH1cbn1cbiJdfQ==