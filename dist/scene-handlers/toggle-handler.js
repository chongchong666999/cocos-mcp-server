"use strict";
/**
 * Toggle UI 创建处理器
 * 在场景脚本上下文中执行，可以直接访问 cc 对象
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.createToggleWithTemplate = createToggleWithTemplate;
function createToggleWithTemplate(name, parentUuid, width, height, getCC, markSceneDirty) {
    var _a;
    try {
        const { director, Node, color } = getCC();
        const scene = director.getScene();
        if (!scene) {
            return { success: false, error: 'No active scene' };
        }
        const BG_SPRITE = '6827ca32-0107-4552-bab2-dfb31799bb44';
        const CHECKMARK_SPRITE = '90004ad6-2f6d-40e1-93ef-b714375c6f06';
        // 1. 主节点
        const toggleNode = new Node(name);
        const parent = parentUuid ? scene.getChildByUuid(parentUuid) : scene;
        (parent || scene).addChild(toggleNode);
        toggleNode.setContentSize(width, height);
        toggleNode.setAnchorPoint(0.5, 0.5);
        // 2. 背景
        const bgNode = new Node('Background');
        toggleNode.addChild(bgNode);
        bgNode.setContentSize(width, height);
        bgNode.setAnchorPoint(0.5, 0.5);
        const bgSprite = bgNode.addComponent(cc.Sprite);
        bgSprite.type = cc.Sprite.Type.SIMPLE;
        bgSprite.sizeMode = cc.Sprite.SizeMode.TRIMMED;
        const bgFrame = new cc.SpriteFrame();
        bgFrame._uuid = BG_SPRITE;
        bgSprite.spriteFrame = bgFrame;
        // 3. 勾选图
        const checkNode = new Node('checkmark');
        toggleNode.addChild(checkNode);
        checkNode.setContentSize(width, height);
        checkNode.setAnchorPoint(0.5, 0.5);
        const checkSprite = checkNode.addComponent(cc.Sprite);
        checkSprite.type = cc.Sprite.Type.SIMPLE;
        checkSprite.sizeMode = cc.Sprite.SizeMode.RAW;
        const checkFrame = new cc.SpriteFrame();
        checkFrame._uuid = CHECKMARK_SPRITE;
        checkSprite.spriteFrame = checkFrame;
        // 4. Toggle 组件
        const toggleComp = toggleNode.addComponent(cc.Toggle);
        toggleComp.transition = cc.Button.Transition.SPRITE;
        toggleComp.enableAutoGrayEffect = false;
        toggleComp.normalColor = color(214, 214, 214, 255);
        toggleComp.pressedColor = color(211, 211, 211, 255);
        toggleComp.hoverColor = color(255, 255, 255, 255);
        toggleComp.disabledColor = color(124, 124, 124, 255);
        toggleComp.target = bgNode;
        toggleComp.isChecked = true;
        toggleComp.checkMark = checkSprite;
        markSceneDirty();
        try {
            if (typeof Editor !== 'undefined' && ((_a = Editor.Ipc) === null || _a === void 0 ? void 0 : _a.sendToPanel)) {
                Editor.Ipc.sendToPanel('scene', 'scene:soft-reload');
            }
        }
        catch (error) {
            console.warn('[scene-script] Failed to refresh scene view:', error);
        }
        return {
            success: true,
            message: `Toggle '${name}' created successfully`,
            data: {
                uuid: toggleNode.uuid || toggleNode._id,
                name: toggleNode.name || toggleNode._name,
                width,
                height
            }
        };
    }
    catch (error) {
        return { success: false, error: error.message || error };
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidG9nZ2xlLWhhbmRsZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvc2NlbmUtaGFuZGxlcnMvdG9nZ2xlLWhhbmRsZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBOzs7R0FHRzs7QUFFSCw0REFxRkM7QUFyRkQsU0FBZ0Isd0JBQXdCLENBQ3BDLElBQVksRUFDWixVQUF5QixFQUN6QixLQUFhLEVBQ2IsTUFBYyxFQUNkLEtBQWdCLEVBQ2hCLGNBQTBCOztJQUUxQixJQUFJLENBQUM7UUFDRCxNQUFNLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsR0FBRyxLQUFLLEVBQUUsQ0FBQztRQUMxQyxNQUFNLEtBQUssR0FBRyxRQUFRLENBQUMsUUFBUSxFQUFFLENBQUM7UUFDbEMsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDO1lBQ1QsT0FBTyxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLGlCQUFpQixFQUFFLENBQUM7UUFDeEQsQ0FBQztRQUVELE1BQU0sU0FBUyxHQUFHLHNDQUFzQyxDQUFDO1FBQ3pELE1BQU0sZ0JBQWdCLEdBQUcsc0NBQXNDLENBQUM7UUFFaEUsU0FBUztRQUNULE1BQU0sVUFBVSxHQUFHLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ2xDLE1BQU0sTUFBTSxHQUFHLFVBQVUsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLGNBQWMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDO1FBQ3JFLENBQUMsTUFBTSxJQUFJLEtBQUssQ0FBQyxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUN2QyxVQUFVLENBQUMsY0FBYyxDQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsQ0FBQztRQUN6QyxVQUFVLENBQUMsY0FBYyxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQztRQUVwQyxRQUFRO1FBQ1IsTUFBTSxNQUFNLEdBQUcsSUFB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bUIsQ0FBQyxDQUFDO1lBQ3pELENBQUM7UUFDTCxDQUFDO1FBQUMsT0FBTyxLQUFLLEVBQUUsQ0FBQztZQUNiLE9BQU8sQ0FBQyxJQUFJLENBQUMsOENBQThDLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFDeEUsQ0FBQztRQUVELE9BQU87WUFDSCxPQUFPLEVBQUUsSUFBSTtZQUNiLE9BQU8sRUFBRSxXQUFXLElBQUksd0JBQXdCO1lBQ2hELElBQUksRUFBRTtnQkFDRixJQUFJLEVBQUUsVUFBVSxDQUFDLElBQUksSUFBSSxVQUFVLENBQUMsR0FBRztnQkFDdkMsSUFBSSxFQUFFLFVBQVUsQ0FBQyxJQUFJLElBQUksVUFBVSxDQUFDLEtBQUs7Z0JBQ3pDLEtBQUs7Z0JBQ0wsTUFBTTthQUNUO1NBQ0osQ0FBQztJQUNOLENBQUM7SUFBQyxPQUFPLEtBQVUsRUFBRSxDQUFDO1FBQ2xCLE9BQU8sRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLENBQUMsT0FBTyxJQUFJLEtBQUssRUFBRSxDQUFDO0lBQzdELENBQUM7QUFDTCxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBUb2dnbGUgVUkg5Yib5bu65aSE55CG5ZmoXG4gKiDlnKjlnLrmma/ohJrmnKzkuIrkuIvmlofkuK3miafooYzvvIzlj6/ku6Xnm7TmjqXorr/pl64gY2Mg5a+56LGhXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVRvZ2dsZVdpdGhUZW1wbGF0ZShcbiAgICBuYW1lOiBzdHJpbmcsXG4gICAgcGFyZW50VXVpZDogc3RyaW5nIHwgbnVsbCxcbiAgICB3aWR0aDogbnVtYmVyLFxuICAgIGhlaWdodDogbnVtYmVyLFxuICAgIGdldENDOiAoKSA9PiBhbnksXG4gICAgbWFya1NjZW5lRGlydHk6ICgpID0+IHZvaWRcbikge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHsgZGlyZWN0b3IsIE5vZGUsIGNvbG9yIH0gPSBnZXRDQygpO1xuICAgICAgICBjb25zdCBzY2VuZSA9IGRpcmVjdG9yLmdldFNjZW5lKCk7XG4gICAgICAgIGlmICghc2NlbmUpIHtcbiAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ05vIGFjdGl2ZSBzY2VuZScgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IEJHX1NQUklURSA9ICc2ODI3Y2EzMi0wMTA3LTQ1NTItYmFiMi1kZmIzMTc5OWJiNDQnO1xuICAgICAgICBjb25zdCBDSEVDS01BUktfU1BSSVRFID0gJzkwMDA0YWQ2LTJmNmQtNDBlMS05M2VmLWI3MTQzNzVjNmYwNic7XG5cbiAgICAgICAgLy8gMS4g5Li76IqC54K5XG4gICAgICAgIGNvbnN0IHRvZ2dsZU5vZGUgPSBuZXcgTm9kZShuYW1lKTtcbiAgICAgICAgY29uc3QgcGFyZW50ID0gcGFyZW50VXVpZCA/IHNjZW5lLmdldENoaWxkQnlVdWlkKHBhcmVudFV1aWQpIDogc2NlbmU7XG4gICAgICAgIChwYXJlbnQgfHwgc2NlbmUpLmFkZENoaWxkKHRvZ2dsZU5vZGUpO1xuICAgICAgICB0b2dnbGVOb2RlLnNldENvbnRlbnRTaXplKHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICB0b2dnbGVOb2RlLnNldEFuY2hvclBvaW50KDAuNSwgMC41KTtcblxuICAgICAgICAvLyAyLiDog4zmma9cbiAgICAgICAgY29uc3QgYmdOb2RlID0gbmV3IE5vZGUoJ0JhY2tncm91bmQnKTtcbiAgICAgICAgdG9nZ2xlTm9kZS5hZGRDaGlsZChiZ05vZGUpO1xuICAgICAgICBiZ05vZGUuc2V0Q29udGVudFNpemUod2lkdGgsIGhlaWdodCk7XG4gICAgICAgIGJnTm9kZS5zZXRBbmNob3JQb2ludCgwLjUsIDAuNSk7XG5cbiAgICAgICAgY29uc3QgYmdTcHJpdGUgPSBiZ05vZGUuYWRkQ29tcG9uZW50KGNjLlNwcml0ZSk7XG4gICAgICAgIGJnU3ByaXRlLnR5cGUgPSBjYy5TcHJpdGUuVHlwZS5TSU1QTEU7XG4gICAgICAgIGJnU3ByaXRlLnNpemVNb2RlID0gY2MuU3ByaXRlLlNpemVNb2RlLlRSSU1NRUQ7XG4gICAgICAgIGNvbnN0IGJnRnJhbWUgPSBuZXcgY2MuU3ByaXRlRnJhbWUoKTtcbiAgICAgICAgKGJnRnJhbWUgYXMgYW55KS5fdXVpZCA9IEJHX1NQUklURTtcbiAgICAgICAgYmdTcHJpdGUuc3ByaXRlRnJhbWUgPSBiZ0ZyYW1lO1xuXG4gICAgICAgIC8vIDMuIOWLvumAieWbvlxuICAgICAgICBjb25zdCBjaGVja05vZGUgPSBuZXcgTm9kZSgnY2hlY2ttYXJrJyk7XG4gICAgICAgIHRvZ2dsZU5vZGUuYWRkQ2hpbGQoY2hlY2tOb2RlKTtcbiAgICAgICAgY2hlY2tOb2RlLnNldENvbnRlbnRTaXplKHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICBjaGVja05vZGUuc2V0QW5jaG9yUG9pbnQoMC41LCAwLjUpO1xuXG4gICAgICAgIGNvbnN0IGNoZWNrU3ByaXRlID0gY2hlY2tOb2RlLmFkZENvbXBvbmVudChjYy5TcHJpdGUpO1xuICAgICAgICBjaGVja1Nwcml0ZS50eXBlID0gY2MuU3ByaXRlLlR5cGUuU0lNUExFO1xuICAgICAgICBjaGVja1Nwcml0ZS5zaXplTW9kZSA9IGNjLlNwcml0ZS5TaXplTW9kZS5SQVc7XG4gICAgICAgIGNvbnN0IGNoZWNrRnJhbWUgPSBuZXcgY2MuU3ByaXRlRnJhbWUoKTtcbiAgICAgICAgKGNoZWNrRnJhbWUgYXMgYW55KS5fdXVpZCA9IENIRUNLTUFSS19TUFJJVEU7XG4gICAgICAgIGNoZWNrU3ByaXRlLnNwcml0ZUZyYW1lID0gY2hlY2tGcmFtZTtcblxuICAgICAgICAvLyA0LiBUb2dnbGUg57uE5Lu2XG4gICAgICAgIGNvbnN0IHRvZ2dsZUNvbXAgPSB0b2dnbGVOb2RlLmFkZENvbXBvbmVudChjYy5Ub2dnbGUpO1xuICAgICAgICB0b2dnbGVDb21wLnRyYW5zaXRpb24gPSBjYy5CdXR0b24uVHJhbnNpdGlvbi5TUFJJVEU7XG4gICAgICAgIHRvZ2dsZUNvbXAuZW5hYmxlQXV0b0dyYXlFZmZlY3QgPSBmYWxzZTtcbiAgICAgICAgdG9nZ2xlQ29tcC5ub3JtYWxDb2xvciA9IGNvbG9yKDIxNCwgMjE0LCAyMTQsIDI1NSk7XG4gICAgICAgIHRvZ2dsZUNvbXAucHJlc3NlZENvbG9yID0gY29sb3IoMjExLCAyMTEsIDIxMSwgMjU1KTtcbiAgICAgICAgdG9nZ2xlQ29tcC5ob3ZlckNvbG9yID0gY29sb3IoMjU1LCAyNTUsIDI1NSwgMjU1KTtcbiAgICAgICAgdG9nZ2xlQ29tcC5kaXNhYmxlZENvbG9yID0gY29sb3IoMTI0LCAxMjQsIDEyNCwgMjU1KTtcbiAgICAgICAgdG9nZ2xlQ29tcC50YXJnZXQgPSBiZ05vZGU7XG4gICAgICAgIHRvZ2dsZUNvbXAuaXNDaGVja2VkID0gdHJ1ZTtcbiAgICAgICAgdG9nZ2xlQ29tcC5jaGVja01hcmsgPSBjaGVja1Nwcml0ZTtcblxuICAgICAgICBtYXJrU2NlbmVEaXJ0eSgpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBFZGl0b3IgIT09ICd1bmRlZmluZWQnICYmIEVkaXRvci5JcGM/LnNlbmRUb1BhbmVsKSB7XG4gICAgICAgICAgICAgICAgRWRpdG9yLklwYy5zZW5kVG9QYW5lbCgnc2NlbmUnLCAnc2NlbmU6c29mdC1yZWxvYWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignW3NjZW5lLXNjcmlwdF0gRmFpbGVkIHRvIHJlZnJlc2ggc2NlbmUgdmlldzonLCBlcnJvcik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGBUb2dnbGUgJyR7bmFtZX0nIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5YCxcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICB1dWlkOiB0b2dnbGVOb2RlLnV1aWQgfHwgdG9nZ2xlTm9kZS5faWQsXG4gICAgICAgICAgICAgICAgbmFtZTogdG9nZ2xlTm9kZS5uYW1lIHx8IHRvZ2dsZU5vZGUuX25hbWUsXG4gICAgICAgICAgICAgICAgd2lkdGgsXG4gICAgICAgICAgICAgICAgaGVpZ2h0XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfHwgZXJyb3IgfTtcbiAgICB9XG59XG4iXX0=